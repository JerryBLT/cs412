<!--file: article.html-->

{% extends "blog/base.html" %}

{% block content %}
    <h1> {{article.title}} </h1>

    <!--this display the queryset of all articles-->
    <!-- {{articles}} -->

    <main class="grid-container">

        <article class="featured">
            <!-- <img src="{{article.image_url}}" alt="{{article.image_url}}"> -->
            {% if article.image_file %}
            <img src="{{article.image_file.url}}" alt="{{article.image_file.url}}">
            {% else %}
            <h3> NO IMAGE </h3>
            {% endif %}
            <div>
                <h2>{{article.title}}</h2>
                <strong>by {{article.author}} at {{article.published}}</strong>
                <p>
                    {{article.text}}
                </p>
                <h3>
                    <a href="{% url 'update_article' article.pk %}">Update Article</a>
                </h3>
            </div>

            <!--Display the comments about this article-->
            <div class="comments">
                <h3>Comments:</h3>
                <h3>
                    <a href="{% url 'create_comment' article.pk %}">Add a comment</a>
                </h3>
                {% for comment in article.get_all_comments %}
                    <div class="comment">
                        <strong>by {{ comment.author }} at {{ comment.published }}</strong>
                        <p>
                            {{ comment.text }}
                            <br>
                            <!--Link to delete this comment-->
                            <a href="{% url 'delete_comment' comment.pk %}">Delete</a>
                        </p>
                    </div>
                {% endfor %}
            </div>
        </article>
    </main>
{% endblock %}
