<!--File: mini_insta/templates/mini_insta/show_post.html-->
<!-- Author: Jerry Teixeira jerrybt@bu.edu, 02/14/2026 -->
<!-- Description: Template to show a single post in the mini_insta app -->

{% extends 'mini_insta/base.html' %}

{% block content %}
  <article class="post-card">

    <!--Include the post caption & timestamp-->
    <div class="post-meta">
      {% with likes=post.get_likes %}
        <div class="likes">
          <strong>{{ likes|length }}</strong> like{{ likes|length|pluralize }}
        </div>
      {% endwith %}
      <span class="timestamp">{{ post.timestamp}}</span>
      {% if post.caption %}
        <p class="post-caption">{{ post.caption }}</p>
      {% endif %}
    </div>

    <!--Checking for the photo to display-->
    <section class="post-photos">
      {% if post.get_all_photos %}
        <div class="photos-grid">
          {% for photo in post.get_all_photos %}
            <div class="photo-container">
              <img src="{{ photo.get_image_url }}" alt="Post photo">
            </div>
          {% endfor %}
        </div>
      <!--If there is no photos on the post-->
      {% else %}
        <div class="empty-state">
          <p>No photos for this post.</p>
        </div>
      {% endif %}
    </section>

    <!-- Comments section -->
    <section class="post-comments">
      <h3>Comments</h3>
      {% with comments=post.get_all_comments %}
        {% if comments %}
          <ul>
            {% for comment in comments %}
              <li>
                <strong>@{{ comment.profile.username }}</strong>
                <span class="timestamp">{{ comment.timestamp }}</span>
                <p>{{ comment.text }}</p>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No comments yet.</p>
        {% endif %}
      {% endwith %}
    </section>

    <!--Button to go back to the profile page-->
    <div class="post-actions">
      <a href="{% url 'show_profile' post.profile.pk %}" class="btn btn-ghost">Back to Profile</a>
      <a href="{% url 'update_post' post.pk %}" class="btn btn-ghost">Update</a>
      <a href="{% url 'delete_post' post.pk %}" class="btn btn-ghost">Delete</a>
    </div>
  </article>
{% endblock %}
