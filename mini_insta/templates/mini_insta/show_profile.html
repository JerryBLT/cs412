<!--file: mini_insta/templates/mini_insta/show_profile.html -->
<!-- Author: Jerry Teixeira jerrybt@bu.edu, 02/12/2026 -->
<!-- Description: Template to show a single user profile in the mini_insta app -->

<!-- File: mini_insta/templates/mini_insta/show_profile.html -->
{% extends "mini_insta/base.html" %}

{% block content %}
  <main>
    <img class="avatar" src="{{ profile.profile_image_url }}" alt="{{ profile.username }} profile photo" />

    <!-- the identity -->
    <div class="identity">
      <span class="username">{{ profile.username }}</span>
    </div>

    <p class="display-name">{{ profile.display_name }}</p>

    <!-- the stats -->
    <div class="stats">
      <div class="stat"><strong>TBD </strong>posts</div>
      <div class="stat"><strong>TBD </strong>followers</div>
      <div class="stat"><strong>TBD </strong>following</div>
    </div>

    <!-- the bio and join date -->
    <p class="bio">{{ profile.bio_text }}</p>
    <div class="joined">
      <span>Joined {{ profile.join_date }}</span>
    </div>


    <!-- the posts section -->
    <h2>
      Posts
      <a href="{% url 'create_post' profile.pk %}">+ New Post</a>
    </h2>
    <div class="posts-grid">

      <!--Link to the post detail page for each post in the profile's posts list-->
      {% for post in profile.get_all_posts %}
        <a href="{% url 'show_post' post.pk %}">

          {% with first_photo=post.get_all_photos.first %}
            {% if first_photo %}
              <img
                  src="{{ first_photo.image_url }}"
                  alt="Post image" />
            {% else %}
              <div>No photo</div>
            {% endif %}
          {% endwith %}

        </a>
      <!-- Caption + timestamp -->
      <div>
        <p>{{ post.timestamp }}</p>
        {% if post.caption %}
          <p>{{ post.caption }}</p>
        {% endif %}
      </div>

    </div>

    {% empty %}
      <p>This user has no posts yet.</p>
    {% endfor %}
    
  </main>
{% endblock %}
